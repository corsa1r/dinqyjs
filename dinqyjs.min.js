var Dinqyjs=function(){var t=null,n=void 0,r=!0,i=!1,e=Array,u=e.prototype,s=function(t){return function(n){return t===n}},o=function(t,n){var r=t/2;return parseInt(n>0?Math.ceil(r):r)},h={ARRAY_PREALLOCATION:64e3},f=function(t,n){return t>n?1:n>t?-1:0},c=function(t,n,r){var i,e,u,s,o=m(r),h=0,f=[];for(t=M(t).distinct(r).raw(),n=b(n),s=n.length;h<t.length;){for(e=t[h++],i=0;s>i&&(u=n[i],!(o&&r(e,u)||!o&&e===u));)i++;i===s&&f.push(e)}return M(f)},a=function(t,n){var r,i;for(i in t)r=t[i],m(r)||n(r,i)},l=function(t){throw new Error(t)},p="Array contains no matching elements",_="Array does not contain exactly one matching element",g=function(t,n,r,i,e){var u,s=t.length;if(r=r||1,!m(n))return s>0?r>0?0:s-1:-1;for(d(i)&&(i=r>0?0:s-1),(d(e)||e>s)&&(e=s);e>0;){if(u=t[i],n(u))return i;i+=r,e--}return-1},v=function(n,r,i){for(var e,u,s=r.length,o=s>0?r[0]:t,h=0,f=m(i);s>h;)e=r[h++],u=f?i(e):e,(n?o>=u:u>=o)&&(o=e);return o},m=function(t){return"function"==typeof t},d=function(t){return t===n},y=function(t,n){return{inner:t,outer:n}},x=function(t,n,r,i){for(var e=0;e<t.length;){if(r(t[e],e)==i)return;n(t[e],e++)}},A=function(t,n){return.25*(t*n+t)},O=function(t,n){return t*n},w=function(t,n,r,i){for(var e,u,s=0,o=[],h=m(r),f=m(i);s<t.length;)e=t[s++],u=n(e),h&&(e=r(e)),(o[u]=u in o?o[u]:[]).push(e);return f&&L(o,i),o},I=function(t,r,i){var e,u,s,o,h,f,c,a,l=m(i),p=t.count();return 1>p?n:(e=t.raw().concat(),q(e,i),u=A(r,p),s=parseInt(u),o=parseInt(Math.ceil(u)),c=e[s-1],a=e[o-1],h=l?i(c):c,f=l?i(a):a,o>s?h:(h+f)/2)},R=function(){return Math.random()-.5},q=function(t,n){return d(n)||n.length<1?void t.sort(f):(n=m(n)?[n]:u.slice.call(n),void t.sort(j(n)))},j=function(t){return function(n,r){for(var i,e,u,s,o=0,h=0,f=t.length;f>o&&0===h;)s=t[o++],m(s)&&(u=0,f>o&&"string"==typeof t[o]&&0===t[o].indexOf("des")&&(u=1),i=s(n),e=s(r),e>i?h=u?1:-1:i>e&&(h=u?-1:1));return h}},k=function(n,r,i){for(var e,u,s=t,o=n.length-1,h=m(i);o>=0;)e=n[o--],u=h?i(e):e,s=s===t?u:r(s,u);return s},b=function(t){return t._||t},L=function(t,n){var r,i;for(r in t)i=t[r],t[r]=n(i,r);return t},M=function(t){return t._?t:new Dinqyjs.Collection(t)};return u.indexOf||(u.indexOf=function(t,n){return g(this,s(t),1,n)}),u.lastIndexOf||(u.lastIndexOf=function(t,n){return g(this,s(t),-1,n)}),u.map||(u.map=function(t){var r=this.length,i=new e(r>h.ARRAY_PREALLOCATION?0:r),u=0;if(!m(t))return n;for(;r>u;)i[u]=t(this[u++]);return i}),e.isArray||(e.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)}),{Collection:function(){function s(t){this._=t||[]}return s.associative=function(t){for(var n in t)if(!m(t[n]))return 0===+t.length;return i},s.configure=function(t,n){return h[t]=arguments.length<2?h[t]:n},s.zip=function(){for(var t,n,r,i=0,e=arguments,u=arguments.length,s=[];u>i;){for(n=b(e[i++]),r=n.length;s.length<r;)s.push([]);for(t=0;r>t;)s[t].push(n[t++])}return M(s)},s.prototype={all:function(t){for(var n=r,e=0;e<this._.length;)n&=t(this._[e++]);return n?r:i},any:function(t){return g(this._,t)>=0},ascending:function(){return q(this._,arguments),this},orderBy:function(){q(this._,arguments)},atRandom:function(){return this._[Math.floor(Math.random()*this._.length)]},average:function(t){var n=this._.length;return n?this.sum(t)/n:0},clear:function(){this._.splice(0,this._.length)},clearWhere:function(t){for(var n=this._.length-1;n>=0;)t(this._[n])&&this._.splice(n,1),n--;return this},clone:function(){return M(this._.concat())},concat:function(){return M(u.concat.apply(this._,arguments))},contains:function(t){return this._.indexOf(t)>-1},count:function(t){var n=0,r=this._.length,i=0;if(d(t))return r;for(;r>n;)this._[n++]===t&&i++;return i},descending:function(){return q(this._,arguments),this.reverse()},difference:function(t,n){var r=this._;return t=b(t),c(r,t,n).union(c(t,r,n))},distinct:function(t){for(var n,r,i,e=m(t),u=[],s=0,o=this._.length;o>s;)if(n=this._[s++],-1==u.indexOf(n))for(i=0;o>i;){if(r=this._[i],e&&t(n,r)||!e&&n===r){u.push(n);break}i++}return M(u)},doUntil:function(t,n){x(this._,t,n,1)},doWhile:function(t,n){x(this._,t,n,0)},each:function(t){var n=0,r=this._.length;if(r!==+r||s.associative(this._))a(this._,t);else for(;r>n;)t(this._[n],n++)},element:function(t,n){return this._[t]=arguments.length>1?n:this._[t]},equalTo:function(t,n){t=b(t);var e,u,s=this._.length,o=s-1,h=m(n);if(s!=t.length)return i;for(;o>=0;)if(e=this._[o],u=t[o--],h?!n(e,u):e!==u)return i;return r},findIndex:function(t,n,r){return m(t)?g(this._,t,1,n,r):-1},findLastIndex:function(t,n,r){return m(t)?g(this._,t,-1,n,r):-1},first:function(t){var n=g(this._,t);return n>=0?this._[n]:void l(p)},flatten:function(){for(var t,n=0,r=M([]);n<this._.length;)t=this._[n++],s.prototype.push.apply(r,e.isArray(t)?t:[t]);return r},groupBy:function(t,n,r){var i,e=w(this._,t,n,r);this._.splice(0,this._.length);for(i in e)this._[i]=e[i];return this},indexOf:function(){return u.indexOf.apply(this._,arguments)},insert:function(t,n){this._.splice(t,0,n)},insertRange:function(t,n){u.splice.apply(this._,[t,0].concat(arguments.length<3?b(n):u.slice.call(arguments,1)))},intersect:function(t,n){for(var r,i,e,u=m(n),s=[],o=0,h=this.distinct(n).raw(),f=M(t).distinct(n).raw();o<h.length;)for(r=h[o++],e=0;e<f.length;)if(i=f[e++],u&&n(r,i)||!u&&r===i){s.push(r);break}return M(s)},innerJoin:function(t,n,r){if(t=b(t),!e.isArray(t))return this.clone();m(r)||(r=y);for(var i,u,s,o=[],h=0;h<this._.length;)for(i=this._[h++],s=0;s<t.length;)u=t[s++],n(i,u)&&o.push(r(i,u));return M(o)},interquartileRange:function(t){return this.upperquartile(t)-this.lowerquartile(t)},join:function(){return u.join.apply(this._,arguments)},keys:function(){var t,n=[];for(t in this._)m(this._[t])||n.push(t);return n},last:function(t){var n=g(this._,t,-1);return n>=0?this._[n]:void l(p)},lastIndexOf:function(){return u.lastIndexOf.apply(this._,arguments)},lowerquartile:function(t){return I(this,1,t)},map:function(){var t=u.map.apply(this._,arguments);return t?M(t):n},max:function(t){return v(0,this._,t)},median:function(){var t,n,r;return r=this.clone(),q(r.raw(),arguments),t=r.middle(),n=r.middle(1),n>t?(t+n)/2:t},middle:function(t){return this._[o(this._.length-1,t)]},min:function(t){return v(1,this._,t)},mode:function(t){var n,r,i,e,u=0,s=[],o=0;for(i=(m(t)?this.map(t):this.clone()).ascending().raw();o<i.length;)e=i[o++],r=e===n?r+1:0,r===u?s.push(e):r>u&&(s=[e],u++),n=e;return s},multiply:function(t){return this._.length>0?k(this._,O,t):0},outerJoin:function(n,r,i){var u,s,o,h,f=[],c=0,a=m(r);if(n=b(n),!e.isArray(n))return this.clone();for(m(i)||(i=y);c<this._.length;){for(u=this._[c++],o=0,h=0;h<n.length;)s=n[h++],(a&&r(u,s)||!a&&u===s)&&(o=1,f.push(i(u,s)));o||f.push(i(u,t))}return M(f)},pack:function(){for(var n,r=this._.length-1;r>=0;)n=this._[r],(d(n)||n===t)&&this._.splice(r,1),r--;return this},partition:function(t,n,r){return M(w(this._,t,n,r))},pop:function(){return u.pop.apply(this._,arguments)},push:function(){return u.push.apply(this._,arguments)},pushRepeatedly:function(t,n){for(var r=0;n>r;)this.push(t);return this},range:function(t,n){return M(this._.slice(t,n))},raw:function(){return this._},removeAt:function(t){this._.splice(t,1)},removeRange:function(t,n){this._.splice(t,n)},reverse:function(){return M(u.reverse.apply(this._,arguments))},shift:function(){return u.shift.apply(this._,arguments)},shuffle:function(){return this._.sort(R),this},single:function(t){var n=b(this);return m(t)&&(n=M(this).where(t).raw()),1!=n.length&&l(_),n[0]},skip:function(t){return M(this._.slice(t))},sort:function(){return u.sort.apply(this._,arguments),this},sum:function(t){return this._.length>0?k(this._,function(t,n){return t+n},t):0},take:function(t){return M(this._.slice(0,t))},toString:function(){return u.toString.apply(this._)},union:function(t){var n=this.clone();return u.push.apply(n.raw(),b(t)),n},unshift:function(){return u.unshift.apply(this._,arguments)},upperquartile:function(t){return I(this,3,t)},valueOf:function(){return u.valueOf.apply(this._,arguments)},where:function(t){for(var n,r=[],i=0;i<this._.length;)n=this._[i++],t(n)&&r.push(n);return M(r)}},s}()}}();"object"==typeof exports&&exports&&(exports.Dinqyjs=Dinqyjs);
