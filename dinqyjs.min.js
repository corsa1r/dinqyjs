var Dinqyjs=function(){return{Collection:function(){function e(e){this._=e||[]}var t={ARRAY_PREALLOCATION:64e3},n=function(e,t,n){var r=f(n),i=0,s,o,u,a=[],l;e=h(e).distinct(n).raw();t=p(t);l=t.length;while(i<e.length){o=e[i++];s=0;while(s<l){u=t[s];if(r&&n(o,u)||!r&&o===u){break}s++}if(s===l){a.push(o)}}return h(a)},r=function(e,t){var n,r;for(r in e){n=e[r];if(!f(n)){t(n,r)}}},i="Array contains no matching elements",s="Array does not contain exactly one matching element",o=Array.prototype,u=function(e,t,n,r,i){var s,o=e.length;n=n||1;if(!f(t)){return o>0?n>0?0:o-1:-1}if(l(r)){r=n>0?0:o-1}if(l(i)||i>o){i=o}while(i>0){s=e[r];if(t(s)){return r}r+=n;i--}return-1},a=function(e,t,n){var r=t.length,i=r>0?t[0]:null,s,o=0,u=f(n),a;while(o<r){s=t[o++];a=u?n(s):s;if(e?a<=i:a>=i){i=s}}return i},f=function(e){return typeof e=="function"},l=function(e){return e===void 0},c=function(e,t){return{inner:e,outer:t}},h=function(t){return t._?t:new e(t)},p=function(e){return e._||e},d=function(e,t,n){var r=null,i=e.length-1,s,o=f(n),u;while(i>=0){s=e[i--];u=o?n(s):s;r=r===null?u:t(r,u)}return r},v=function(e,t,n,r){var i=0,s,o=[],u,a=f(n),l=f(r);while(i<e.length){s=e[i++];u=t(s);if(a){s=n(s)}(o[u]=u in o?o[u]:[]).push(s)}if(l){g(o,r)}return o},m=function(e){var t=f(e);return t?[function(t,n){return e(t)-e(n)}]:[]},g=function(e,t){var n,r;for(n in e){r=e[n];e[n]=t(r,n)}return e};e.associative=function(e){for(var t in e){if(!f(e[t])){return+e.length===0}}return false};e.configure=function(e,n){return t[e]=arguments.length<2?t[e]:n};e.prototype={all:function(e){var t=true,n=0;while(n<this._.length){t&=e(this._[n++])}return t?true:false},any:function(e){return u(this._,e)>=0},ascending:function(e){o.sort.apply(this._,m(e));return this},atRandom:function(){return this._[Math.floor(Math.random()*this._.length)]},average:function(e){var t=0,n=0,r=this._.length;while(n<r){t+=e?e(this._[n]):this._[n];n++}return r?t/r:0},clear:function(){this._.splice(0,this._.length)},clearWhere:function(e){var t=this._.length-1;while(t>=0){if(e(this._[t])){this._.splice(t,1)}t--}return this},clone:function(){return h(this._.concat())},concat:function(){return h(o.concat.apply(this._,arguments))},contains:function(e){return this._.indexOf(e)>-1},count:function(){return this._.length},descending:function(e){o.sort.apply(this._,m(e)).reverse();return this},difference:function(e,t){e=p(e);var r=this._;return n(r,e,t).union(n(e,r,t))},distinct:function(e){var t=f(e),n=[],r,i,s=0,o,u=this._.length;while(s<u){r=this._[s++];if(n.indexOf(r)==-1){o=0;while(o<u){i=this._[o];if(t&&e(r,i)||!t&&r===i){n.push(r);break}o++}}}return h(n)},doUntil:function(e,t){var n=0;while(n<this._.length){e(this._[n]);if(t(this._[++n])){return}}},doWhile:function(e,t){var n=0;while(n<this._.length){if(!t(this._[n],n)){return}e(this._[n],n++)}},each:function(t){var n=0,i=this._.length;if(i===+i&&!e.associative(this._)){while(n<i){t(this._[n],n);n++}}else{r(this._,t)}},element:function(e,t){return this._[e]=arguments.length>1?t:this._[e]},equalTo:function(e,t){e=p(e);var n=this._.length,r=n-1,i=f(t),s,o;if(n!=e.length){return false}while(r>=0){s=this._[r];o=e[r--];if(i?!t(s,o):s!==o){return false}}return true},findIndex:function(e,t,n){return f(e)?u(this._,e,1,t,n):-1},findLastIndex:function(e,t,n){return f(e)?u(this._,e,-1,t,n):-1},first:function(e){var t=u(this._,e);if(t>=0){return this._[t]}throw new Error(i)},flatten:function(){var t=0,n=new e,r;while(t<this._.length){r=this._[t++];e.prototype.push.apply(n,Array.isArray(r)?r:[r])}return n},groupBy:function(e,t,n){var r=v(this._,e,t,n),i;this._.splice(0,this._.length);for(i in r){this._[i]=r[i]}return this},indexOf:function(){return o.indexOf.apply(this._,arguments)},insert:function(e,t){this._.splice(e,0,t)},insertRange:function(e,t){var n=[e,0].concat(arguments.length<3?p(t):o.slice.call(arguments,1));o.splice.apply(this._,n)},intersect:function(e,t){var n=f(t),r=[],i,s,o=0,u,a=this.distinct(t).raw(),l=h(e).distinct(t).raw();while(o<a.length){i=a[o++];u=0;while(u<l.length){s=l[u++];if(n&&t(i,s)||!n&&i===s){r.push(i);break}}}return h(r)},innerJoin:function(e,t,n){e=p(e);if(!Array.isArray(e)){return this.clone()}if(!f(n)){n=c}var r=[],i,s,o=0,u;while(o<this._.length){i=this._[o++];u=0;while(u<e.length){s=e[u++];if(t(i,s)){r.push(n(i,s))}}}return h(r)},join:function(){return o.join.apply(this._,arguments)},keys:function(){var e=[],t;for(t in this._){if(!f(this._[t])){e.push(t)}}return e},last:function(e){var t=u(this._,e,-1);if(t>=0){return this._[t]}throw new Error(i)},lastIndexOf:function(){return o.lastIndexOf.apply(this._,arguments)},map:function(){var e=o.map.apply(this._,arguments);return e?h(e):void 0},max:function(e){return a(0,this._,e)},median:function(){var e=this._.length,t=parseInt(e/2-.5);return t>=e?void 0:this._[t]},min:function(e){return a(1,this._,e)},multiply:function(e){return this._.length>0?d(this._,function(e,t){return e*t},e):0},outerJoin:function(e,t,n){e=p(e);if(!Array.isArray(e)){return h(this._.concat())}if(!f(n)){n=c}var r=[],i,s,o,u=0,a,l=f(t);while(u<this._.length){i=this._[u++];o=0;a=0;while(a<e.length){s=e[a++];if(l&&t(i,s)||!l&&i===s){o=1;r.push(n(i,s))}}if(!o){r.push(n(i,null))}}return h(r)},pack:function(){var e=this._.length-1,t;while(e>=0){t=this._[e];if(l(t)||t===null){this._.splice(e,1)}e--}return this},partition:function(e,t,n){return h(v(this._,e,t,n))},pop:function(){return o.pop.apply(this._,arguments)},push:function(){return o.push.apply(this._,arguments)},range:function(e,t){return h(this._.slice(e,t))},raw:function(){return this._},removeAt:function(e){this._.splice(e,1)},removeRange:function(e,t){this._.splice(e,t)},reverse:function(){return h(o.reverse.apply(this._,arguments))},shift:function(){return o.shift.apply(this._,arguments)},shuffle:function(){var e=this._.length-1,t,n;while(e>=0){n=Math.floor(Math.random()*this._.length);t=this._[e];this._[e--]=this._[n];this._[n]=t}return this},single:function(e){var t=p(this);if(f(e)){t=h(this).where(e).raw()}if(t.length!=1){throw new Error(s)}return t[0]},skip:function(e){return h(this._.slice(e))},sort:function(){o.sort.apply(this._,arguments);return this},sum:function(e){return this._.length>0?d(this._,function(e,t){return e+t},e):0},take:function(e){return h(this._.slice(0,e))},toString:function(){return o.toString.apply(this._,arguments)},union:function(e){var t=this.clone();o.push.apply(t.raw(),p(e));return t},unshift:function(){return o.unshift.apply(this._,arguments)},valueOf:function(){return o.valueOf.apply(this._,arguments)},where:function(e){var t=[],n,r=0;while(r<this._.length){n=this._[r++];if(e(n)){t.push(n)}}return h(t)}};if(!o.indexOf){o.indexOf=function(e,t){return u(this,y(e),1,t)}}if(!o.lastIndexOf){o.lastIndexOf=function(e,t){return u(this,y(e),-1,t)}}if(!o.map){o.map=function(e){var n=this.length,r=new Array(n>t.ARRAY_PREALLOCATION?0:n),i=0;if(!f(e)){return void 0}while(i<n){r[i]=e(this[i++])}return r}}if(!Array.isArray){Array.isArray=function(e){return Object.prototype.toString.call(e)=="[object Array]"}}var y=function(e){return function(t){return e===t}};return e}()}}();if(typeof exports==="object"&&exports){exports.Dinqyjs=Dinqyjs}