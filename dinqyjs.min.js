var Dinqyjs=function(){return{Collection:function(){function n(n){this._=n||[]}var t={ARRAY_PREALLOCATION:64e3},r=function(t,r,i){var e,u,s,o,f,a=h(i),c=0,l=[];for(t=_(t).distinct(i).raw(),r=p(r),o=t.length,f=r.length;o>c;){for(u=t[c],e=0;f>e&&(s=r[e],!(a&&i(u,s)||!a&&u===s));)e++;e===f&&l.push(u),c++}return new n(l)},i="Array contains no matching elements",e="Array does not contain exactly one matching element",u=Array.prototype,s=function(n,t,r,i,e){var u,s=n.length;if(r=r||1,!h(t))return s>0?r>0?0:s-1:-1;for(f(i)&&(i=r>0?0:s-1),(f(e)||e>s)&&(e=s);e>0;){if(u=n[i],t(u))return i;i+=r,e--}return-1},o=function(n,t,r){for(var i,e=t.length,u=e>0?t[0]:null,s=0;e>s;)i=t[s],n("function"==typeof r?r(i):i,u)&&(u=i),s++;return u},h=function(n){return"function"==typeof n},f=function(n){return void 0===n},a=function(n,t){return{inner:n,outer:t}},c=function(n,t){return n>=t},l=function(n,t){return t>=n},_=function(t){return t._?t:new n(t)},p=function(n){return n._||n},g=function(n,t,r){for(var i,e,u=null,s=n.length-1,o=h(r);s>=0;)i=n[s--],e=o?r(i):i,u=null===u?e:t(u,e);return u};n.configure=function(n,r){return t[n]=arguments.length<2?t[n]:r};var y=function(n){var t=h(n);return t?[function(t,r){return n(t)-n(r)}]:[]};n.prototype={all:function(n){for(var t=!0,r=0;r<this._.length;r++)t&=n(this._[r]);return t?!0:!1},any:function(n){return s(this._,n)>=0},ascending:function(n){return u.sort.apply(this._,y(n)),this},atRandom:function(){return this._[Math.floor(Math.random()*this._.length)]},average:function(n){for(var t=0,r=0,i=this._.length;i>r;)t+=n?n(this._[r]):this._[r],r++;return i?t/i:0},clear:function(){this._.splice(0,this._.length)},clearWhere:function(n){for(var t=this._.length,r=t-1;r>=0;)n(this._[r])&&this._.splice(r,1),r--;return this},clone:function(){return new n(this._.concat())},concat:function(){return new n(u.concat.apply(this._,arguments))},contains:function(n){return this._.indexOf(n)>-1},count:function(){return this._.length},descending:function(n){return u.sort.apply(this._,y(n)).reverse(),this},difference:function(n,t){n=p(n);var i=this._;return r(i,n,t).union(r(n,i,t))},distinct:function(t){for(var r,i,e,u=h(t),s=[],o=0;o<this._.length;){if(r=this._[o],-1==s.indexOf(r))for(e=0;e<this._.length;){if(i=this._[e],u&&t(r,i)||!u&&r===i){s.push(r);break}e++}o++}return new n(s)},doUntil:function(n,t){for(var r=0,i=this._.length;i>r;)if(n(this._[r]),r++,t(this._[r]))return},doWhile:function(n,t){for(var r=0,i=this._.length;i>r;){if(!t(this._[r],r))return;n(this._[r],r),r++}},each:function(n){for(var t=0,r=this._.length;r>t;)n(this._[t],t),t++},element:function(n){return this._[n]},findIndex:function(n,t,r){return h(n)?s(this._,n,1,t,r):-1},findLastIndex:function(n,t,r){return h(n)?s(this._,n,-1,t,r):-1},first:function(n){var t=s(this._,n);if(t>=0)return this._[t];throw new Error(i)},flatten:function(){for(var t,r=0,i=new n,e=this._.length;e>r;)t=this._[r++],n.prototype.push.apply(i,Array.isArray(t)?t:[t]);return i},indexOf:function(){return u.indexOf.apply(this._,arguments)},insert:function(n,t){this._.splice(n,0,t)},insertRange:function(n,t){var r=[n,0].concat(arguments.length<3?p(t):Array.prototype.slice.call(arguments,1));Array.prototype.splice.apply(this._,r)},intersect:function(t,r){for(var i,e,u,s=h(r),o=[],f=0,a=this.distinct(r).raw(),c=_(t).distinct(r).raw(),l=a.length,p=c.length;l>f;){for(i=a[f],u=0;p>u;){if(e=c[u],s&&r(i,e)||!s&&i===e){o.push(i);break}u++}f++}return new n(o)},innerJoin:function(t,r,i){if(t=p(t),!Array.isArray(t))return new n(this._.concat());h(i)||(i=a);for(var e,u,s,o=[],f=0,c=this._.length,l=t.length;c>f;){for(e=this._[f],s=0;l>s;)u=t[s],r(e,u)&&o.push(i(e,u)),s++;f++}return new n(o)},join:function(){return u.join.apply(this._,arguments)},keys:function(){var n=[];for(var t in this._)n.push(t);return n},last:function(n){var t=s(this._,n,-1);if(t>=0)return this._[t];throw new Error(i)},lastIndexOf:function(){return u.lastIndexOf.apply(this._,arguments)},map:function(){var t=u.map.apply(this._,arguments);return t?new n(t):void 0},max:function(n){return o(c,this._,n)},min:function(n){return o(l,this._,n)},multiply:function(n){return this._.length>0?g(this._,function(n,t){return n*t},n):0},outerJoin:function(t,r,i){if(t=p(t),!Array.isArray(t))return new n(this._.concat());h(i)||(i=a);for(var e,u,s,o,f=[],c=0,l=this._.length,_=t.length,g=h(r);l>c;){for(e=this._[c++],s=0,o=0;_>o;)u=t[o++],(g&&r(e,u)||!g&&e===u)&&(s=1,f.push(i(e,u)));s||f.push(i(e,null))}return new n(f)},pack:function(){for(var n,t=this._.length-1;t>=0;)n=this._[t],(f(n)||null===n)&&this._.splice(t,1),t--;return this},partition:function(t){for(var r,i,e=this._.length,u=0,s=[];e>u;)r=this._[u++],i=t(r),(s[i]=i in s?s[i]:[]).push(r);return new n(s)},pop:function(){return u.pop.apply(this._,arguments)},push:function(){return u.push.apply(this._,arguments)},range:function(n,t){return this._.slice(n,t)},raw:function(){return this._},removeAt:function(n){this._.splice(n,1)},removeRange:function(n,t){this._.splice(n,t)},reverse:function(){return new n(u.reverse.apply(this._,arguments))},shift:function(){return u.shift.apply(this._,arguments)},shuffle:function(){for(var n,t,r=this._.length,i=r-1;i>=0;)t=Math.floor(Math.random()*r),n=this._[i],this._[i--]=this._[t],this._[t]=n;return this},single:function(n){var t=p(this);if(h(n)&&(t=_(this).where(n).raw()),1!=t.length)throw new Error(e);return t[0]},skip:function(t){return new n(this._.slice(t))},sort:function(){return u.sort.apply(this._,arguments),this},sum:function(n){return this._.length>0?g(this._,function(n,t){return n+t},n):0},take:function(t){return new n(this._.slice(0,t))},toString:function(){return u.toString.apply(this._,arguments)},union:function(n){var t=this.clone();return u.push.apply(t.raw(),p(n)),t},unshift:function(){return u.unshift.apply(this._,arguments)},valueOf:function(){return u.valueOf.apply(this._,arguments)},where:function(t){for(var r,i=[],e=0,u=this._.length;u>e;)r=this._[e],t(r)&&i.push(r),e++;return new n(i)}},u.indexOf||(u.indexOf=function(n,t){return s(this,v(n),1,t)}),u.lastIndexOf||(u.lastIndexOf=function(n,t){return s(this,v(n),-1,t)}),u.map||(u.map=function(n){var r=this.length,i=new Array(r>t.ARRAY_PREALLOCATION?0:r),e=0;if(!h(n))return void 0;for(;r>e;)i[e]=n(this[e++]);return i}),Array.isArray||(Array.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)});var v=function(n){return function(t){return n===t}};return n}()}}();