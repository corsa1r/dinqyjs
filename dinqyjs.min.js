var Dinqyjs=function(){var n=null,t=void 0,r=!0,i=!1,e=Array,u=e.prototype,s=function(n){return function(t){return n===t}},o=function(n,t){var r=n/2;return parseInt(t>0?Math.ceil(r):r)},h={ARRAY_PREALLOCATION:64e3},f=function(n,t){return n>t?1:t>n?-1:0},c=function(n,t,r){var i,e,u,s,o=d(r),h=0,f=[];for(n=C(n).distinct(r).raw(),t=L(t),s=t.length;h<n.length;){for(e=n[h++],i=0;s>i&&(u=t[i],!(o&&r(e,u)||!o&&e===u));)i++;i===s&&f.push(e)}return C(f)},a=function(n,t){var r,i;for(i in n)r=n[i],d(r)||t(r,i)},l=function(n){throw new Error(n)},p="Array contains no matching elements",_="Array does not contain exactly one matching element",g=function(n,t,r,i,e){var u,s=n.length;if(r=r||1,!d(t))return s>0?r>0?0:s-1:-1;for(m(i)&&(i=r>0?0:s-1),(m(e)||e>s)&&(e=s);e>0;){if(u=n[i],t(u))return i;i+=r,e--}return-1},v=function(t,r,i){var e,u,s,o,h,f=d(i);for(s=0,o=r.length,h=o>0?r[0]:n;o>s;s++)e=r[s],u=f?i(e):e,(t?h>=u:u>=h)&&(h=e);return h},d=function(n){return"function"==typeof n},m=function(n){return n===t},y=function(n,t){return{inner:n,outer:t}},x=function(n,t,r,i){for(var e=0;e<n.length&&r(n[e],e)!=i;e++)t(n[e],e)},w=function(n,t){return.25*(n*t+n)},A=function(n,t){return n*t},O=function(n,t,r,i){for(var e,u,s=0,o=[],h=d(r),f=d(i);s<n.length;)e=n[s++],u=t(e),h&&(e=r(e)),(o[u]=u in o?o[u]:[]).push(e);return f&&M(o,i),o},I=function(n,r,i){var e,u,s,o,h,f,c,a,l=d(i),p=n.count();return 1>p?t:(e=n.raw().concat(),q(e,i),u=w(r,p),s=parseInt(u),o=parseInt(Math.ceil(u)),c=e[s-1],a=e[o-1],h=l?i(c):c,f=l?i(a):a,o>s?h:(h+f)/2)},R=function(){return Math.random()-.5},q=function(n,t){return m(t)||t.length<1?void n.sort(f):(t=d(t)?[t]:u.slice.call(t),void n.sort(j(t)))},j=function(n){return function(t,r){for(var i,e,u,s,o=0,h=0,f=n.length;f>o&&0===h;)s=n[o++],d(s)&&(u=0,f>o&&"string"==typeof n[o]&&0===n[o].indexOf("des")&&(u=1),i=s(t),e=s(r),e>i?h=u?1:-1:i>e&&(h=u?-1:1));return h}},k=function(t,r,i){for(var e,u,s=n,o=t.length-1,h=d(i);o>=0;)e=t[o--],u=h?i(e):e,s=s===n?u:r(s,u);return s},L=function(n){return n._||n},M=function(n,t){var r,i;for(r in n)i=n[r],n[r]=t(i,r);return n},C=function(n){return n._?n:new Dinqyjs.Collection(n)};return u.indexOf||(u.indexOf=function(n,t){return g(this,s(n),1,t)}),u.lastIndexOf||(u.lastIndexOf=function(n,t){return g(this,s(n),-1,t)}),u.map||(u.map=function(n){var r=this.length,i=new e(r>h.ARRAY_PREALLOCATION?0:r),u=0;if(!d(n))return t;for(;r>u;)i[u]=n(this[u++]);return i}),e.isArray||(e.isArray=function(n){return n.constructor===e}),{Collection:function(){function t(n){this._=n||[]}return t.associative=function(n){for(var t in n)if(!d(n[t]))return 0===+n.length;return i},t.configure=function(n,t){return h[n]=arguments.length<2?h[n]:t},t.transpose=function(){var n,t,r,i,e,u=arguments,s=[];for(i=0,e=arguments.length;e>i;i++){for(t=L(u[i]),r=t.length;s.length<r;)s.push([]);for(n=0;r>n;)s[n].push(t[n++])}return C(s)},t.prototype={all:function(n){for(var t=r,e=0;e<this._.length;)t&=n(this._[e++]);return t?r:i},any:function(n){return g(this._,n)>=0},ascending:function(){return q(this._,arguments),this},atRandom:function(){return this._[Math.floor(Math.random()*this._.length)]},average:function(n){var t=this._.length;return t?this.sum(n)/t:0},clear:function(){this._.splice(0,this._.length)},clearWhere:function(n){for(var t=this._.length-1;t>=0;)n(this._[t])&&this._.splice(t,1),t--;return this},clone:function(){return C(this._.concat())},concat:function(){return C(u.concat.apply(this._,arguments))},contains:function(n){return this._.indexOf(n)>-1},count:function(n){var t=0,r=this._.length,i=0;if(m(n))return r;for(;r>t;)this._[t++]===n&&i++;return i},descending:function(){return q(this._,arguments),this.reverse()},difference:function(n,t){var r=this._;return n=L(n),c(r,n,t).union(c(n,r,t))},distinct:function(n){var t,r,i,e,u,s=d(n),o=[];for(e=0,u=this._.length;u>e;e++)if(t=this._[e],-1==o.indexOf(t))for(i=0;u>i;){if(r=this._[i],s&&n(t,r)||!s&&t===r){o.push(t);break}i++}return C(o)},doUntil:function(n,t){x(this._,n,t,1)},doWhile:function(n,t){x(this._,n,t,0)},each:function(n){var r=0,i=this._.length;if(i!==+i||t.associative(this._))a(this._,n);else for(;i>r;)n(this._[r],r++)},element:function(n,t){return this._[n]=arguments.length>1?t:this._[n]},equalTo:function(n,t){n=L(n);var e,u,s=this._.length,o=s-1,h=d(t);if(s!=n.length)return i;for(;o>=0;)if(e=this._[o],u=n[o--],h?!t(e,u):e!==u)return i;return r},findIndex:function(n,t,r){return d(n)?g(this._,n,1,t,r):-1},findLastIndex:function(n,t,r){return d(n)?g(this._,n,-1,t,r):-1},first:function(n){var t=g(this._,n);return t>=0?this._[t]:void l(p)},flatten:function(){for(var n,r=0,i=C([]);r<this._.length;)n=this._[r++],t.prototype.push.apply(i,e.isArray(n)?n:[n]);return i},groupBy:function(n,t,r){var i,e=O(this._,n,t,r);this._.splice(0,this._.length);for(i in e)this._[i]=e[i];return this},indexOf:function(){return u.indexOf.apply(this._,arguments)},innerJoin:function(n,t,r){if(n=L(n),!e.isArray(n))return this.clone();d(r)||(r=y);for(var i,u,s,o=[],h=0;h<this._.length;)for(i=this._[h++],s=0;s<n.length;)u=n[s++],t(i,u)&&o.push(r(i,u));return C(o)},insert:function(n,t){this._.splice(n,0,t)},insertRange:function(n,t){u.splice.apply(this._,[n,0].concat(arguments.length<3?L(t):u.slice.call(arguments,1)))},interquartileRange:function(n){return this.upperquartile(n)-this.lowerquartile(n)},intersect:function(n,t){for(var r,i,e,u=d(t),s=[],o=0,h=this.distinct(t).raw(),f=C(n).distinct(t).raw();o<h.length;)for(r=h[o++],e=0;e<f.length;)if(i=f[e++],u&&t(r,i)||!u&&r===i){s.push(r);break}return C(s)},join:function(){return u.join.apply(this._,arguments)},keys:function(){var n,t=[];for(n in this._)d(this._[n])||t.push(n);return t},last:function(n){var t=g(this._,n,-1);return t>=0?this._[t]:void l(p)},lastIndexOf:function(){return u.lastIndexOf.apply(this._,arguments)},lowerquartile:function(n){return I(this,1,n)},map:function(n){if(d(n)){var t=[];return this.each(function(r){t.push(n(r))}),C(t)}return void 0},max:function(n){return v(0,this._,n)},median:function(){var n,t,r;return r=this.clone(),q(r.raw(),arguments),n=r.middle(),t=r.middle(1),t>n?(n+t)/2:n},middle:function(n){return this._[o(this._.length-1,n)]},min:function(n){return v(1,this._,n)},mode:function(n){var t,r,i,e,u=0,s=[],o=0;for(i=(d(n)?this.map(n):this.clone()).ascending().raw();o<i.length;)e=i[o++],r=e===t?r+1:0,r===u?s.push(e):r>u&&(s=[e],u++),t=e;return s},multiply:function(n){return this._.length>0?k(this._,A,n):0},orderBy:function(){q(this._,arguments)},outerJoin:function(t,r,i){var u,s,o,h,f=[],c=0,a=d(r);if(t=L(t),!e.isArray(t))return this.clone();for(d(i)||(i=y);c<this._.length;){for(u=this._[c++],o=0,h=0;h<t.length;)s=t[h++],(a&&r(u,s)||!a&&u===s)&&(o=1,f.push(i(u,s)));o||f.push(i(u,n))}return C(f)},pack:function(){for(var t,r=this._.length-1;r>=0;)t=this._[r],(m(t)||t===n)&&this._.splice(r,1),r--;return this},partition:function(n,t,r){return C(O(this._,n,t,r))},pop:function(){return u.pop.apply(this._,arguments)},push:function(){return u.push.apply(this._,arguments)},pushRepeatedly:function(n,t){for(var r=0;t>r;)this.push(n);return this},range:function(n,t){return C(this._.slice(n,t))},raw:function(){return this._},removeAt:function(n){this._.splice(n,1)},removeRange:function(n,t){this._.splice(n,t)},reverse:function(){return C(u.reverse.apply(this._,arguments))},shift:function(){return u.shift.apply(this._,arguments)},shuffle:function(){return this._.sort(R),this},single:function(n){var t=L(this);return d(n)&&(t=C(this).where(n).raw()),1!=t.length&&l(_),t[0]},skip:function(n){return C(this._.slice(n))},sort:function(){return u.sort.apply(this._,arguments),this},sum:function(n){return this._.length>0?k(this._,function(n,t){return n+t},n):0},take:function(n){return C(this._.slice(0,n))},toString:function(){return u.toString.apply(this._)},union:function(n){var t=this.clone();return u.push.apply(t.raw(),L(n)),t},unshift:function(){return u.unshift.apply(this._,arguments)},upperquartile:function(n){return I(this,3,n)},valueOf:function(){return u.valueOf.apply(this._,arguments)},where:function(n){for(var t,r=[],i=0;i<this._.length;)t=this._[i++],n(t)&&r.push(t);return C(r)}},t}()}}();"object"==typeof exports&&exports&&(exports.Dinqyjs=Dinqyjs);
