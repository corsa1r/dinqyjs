var Dinqyjs=function(){return{Collection:function(){function e(e){this._=e||[]}var t={ARRAY_PREALLOCATION:64e3},n=null,r=true,i=false,s=function(e){return function(t){return e===t}},o=Array.prototype,u=function(e,t){var n=e,r=n/2;return parseInt(t>0?Math.ceil(r):r)},a=function(e,t){return e>t?1:e<t?-1:0},f=function(e,t){return e>t?-1:e<t?1:0},l=function(e,t,n){var r=m(n),i=0,s,o,u,a=[],f;e=k(e).distinct(n).raw();t=N(t);f=t.length;while(i<e.length){o=e[i++];s=0;while(s<f){u=t[s];if(r&&n(o,u)||!r&&o===u){break}s++}if(s===f){a.push(o)}}return k(a)},c=function(e,t){var n,r;for(r in e){n=e[r];if(!m(n)){t(n,r)}}},h="Array contains no matching elements",p="Array does not contain exactly one matching element",d=function(e,t,n,r,i){var s,o=e.length;n=n||1;if(!m(t)){return o>0?n>0?0:o-1:-1}if(g(r)){r=n>0?0:o-1}if(g(i)||i>o){i=o}while(i>0){s=e[r];if(t(s)){return r}r+=n;i--}return-1},v=function(e,t,r){var i=t.length,s=i>0?t[0]:n,o,u=0,a=m(r),f;while(u<i){o=t[u++];f=a?r(o):o;if(e?f<=s:f>=s){s=o}}return s},m=function(e){return typeof e=="function"},g=function(e){return e===void 0},y=function(e,t){return{inner:e,outer:t}},b=function(e,t){return 1/4*(e*t+e)},w=function(e,t,n,r){var i=0,s,o=[],u,a=m(n),f=m(r);while(i<e.length){s=e[i++];u=t(s);if(a){s=n(s)}(o[u]=u in o?o[u]:[]).push(s)}if(f){C(o,r)}return o},E=function(e,t,n){var r=m(n),i,s,o,u,a,f,l,c,h=e.count();if(h<1){return void 0}i=e.raw().concat();x(i,1,n);s=b(t,h);o=parseInt(s);u=parseInt(Math.ceil(s));l=i[o-1];c=i[u-1];a=r?n(l):l;f=r?n(c):c;return u>o?a:(a+f)/2},S=function(){return Math.random()-.5},x=function(e,t){var n=t.length,r,i,s,u,f,l;if(!t||n<1){e.sort(a);return}t=m(t)?t=[t]:o.slice.call(t);e.sort(function(e,o){r=0;i=0;while(r<n&&i===0){f=t[r++];if(!m(f)){continue}l=0;if(r<n&&typeof t[r]=="string"&&t[r].indexOf("des")===0){l=1}s=f(e);u=f(o);if(s<u){i=l?1:-1}else if(s>u){i=l?-1:1}}return i})},T=function(e,t,r){var i=n,s=e.length-1,o,u=m(r),a;while(s>=0){o=e[s--];a=u?r(o):o;i=i===n?a:t(i,a)}return i},N=function(e){return e._||e},C=function(e,t){var n,r;for(n in e){r=e[n];e[n]=t(r,n)}return e},k=function(t){return t._?t:new e(t)};e.associative=function(e){for(var t in e){if(!m(e[t])){return+e.length===0}}return i};e.configure=function(e,n){return t[e]=arguments.length<2?t[e]:n};e.zip=function(){var e=0,t,n=arguments,r=arguments.length,i,s,o=[];while(e<r){i=N(n[e++]);s=i.length;while(o.length<s){o.push([])}t=0;while(t<s){o[t].push(i[t++])}}return k(o)};e.prototype={all:function(e){var t=r,n=0;while(n<this._.length){t&=e(this._[n++])}return t?r:i},any:function(e){return d(this._,e)>=0},ascending:function(){x(this._,arguments);return this},orderBy:function(){x(this._,arguments)},atRandom:function(){return this._[Math.floor(Math.random()*this._.length)]},average:function(e){var t=0,n=0,r=this._.length;while(n<r){t+=e?e(this._[n]):this._[n];n++}return r?t/r:0},clear:function(){this._.splice(0,this._.length)},clearWhere:function(e){var t=this._.length-1;while(t>=0){if(e(this._[t])){this._.splice(t,1)}t--}return this},clone:function(){return k(this._.concat())},concat:function(){return k(o.concat.apply(this._,arguments))},contains:function(e){return this._.indexOf(e)>-1},count:function(){return this._.length},descending:function(){x(this._,arguments);return this.reverse()},difference:function(e,t){e=N(e);var n=this._;return l(n,e,t).union(l(e,n,t))},distinct:function(e){var t=m(e),n=[],r,i,s=0,o,u=this._.length;while(s<u){r=this._[s++];if(n.indexOf(r)==-1){o=0;while(o<u){i=this._[o];if(t&&e(r,i)||!t&&r===i){n.push(r);break}o++}}}return k(n)},doUntil:function(e,t){var n=0;while(n<this._.length){e(this._[n]);if(t(this._[++n])){return}}},doWhile:function(e,t){var n=0;while(n<this._.length){if(!t(this._[n],n)){return}e(this._[n],n++)}},each:function(t){var n=0,r=this._.length;if(r===+r&&!e.associative(this._)){while(n<r){t(this._[n],n);n++}}else{c(this._,t)}},element:function(e,t){return this._[e]=arguments.length>1?t:this._[e]},equalTo:function(e,t){e=N(e);var n=this._.length,s=n-1,o=m(t),u,a;if(n!=e.length){return i}while(s>=0){u=this._[s];a=e[s--];if(o?!t(u,a):u!==a){return i}}return r},findIndex:function(e,t,n){return m(e)?d(this._,e,1,t,n):-1},findLastIndex:function(e,t,n){return m(e)?d(this._,e,-1,t,n):-1},first:function(e){var t=d(this._,e);if(t>=0){return this._[t]}throw new Error(h)},flatten:function(){var t=0,n=new e,r;while(t<this._.length){r=this._[t++];e.prototype.push.apply(n,Array.isArray(r)?r:[r])}return n},groupBy:function(e,t,n){var r=w(this._,e,t,n),i;this._.splice(0,this._.length);for(i in r){this._[i]=r[i]}return this},indexOf:function(){return o.indexOf.apply(this._,arguments)},insert:function(e,t){this._.splice(e,0,t)},insertRange:function(e,t){var n=[e,0].concat(arguments.length<3?N(t):o.slice.call(arguments,1));o.splice.apply(this._,n)},intersect:function(e,t){var n=m(t),r=[],i,s,o=0,u,a=this.distinct(t).raw(),f=k(e).distinct(t).raw();while(o<a.length){i=a[o++];u=0;while(u<f.length){s=f[u++];if(n&&t(i,s)||!n&&i===s){r.push(i);break}}}return k(r)},innerJoin:function(e,t,n){e=N(e);if(!Array.isArray(e)){return this.clone()}if(!m(n)){n=y}var r=[],i,s,o=0,u;while(o<this._.length){i=this._[o++];u=0;while(u<e.length){s=e[u++];if(t(i,s)){r.push(n(i,s))}}}return k(r)},interquartileRange:function(e){return this.upperquartile(e)-this.lowerquartile(e)},join:function(){return o.join.apply(this._,arguments)},keys:function(){var e=[],t;for(t in this._){if(!m(this._[t])){e.push(t)}}return e},last:function(e){var t=d(this._,e,-1);if(t>=0){return this._[t]}throw new Error(h)},lastIndexOf:function(){return o.lastIndexOf.apply(this._,arguments)},lowerquartile:function(e){return E(this,1,e)},map:function(){var e=o.map.apply(this._,arguments);return e?k(e):void 0},max:function(e){return v(0,this._,e)},middle:function(e){return this._[u(this._.length-1,e)]},median:function(){var e,t,n;n=this.clone();x(n.raw(),arguments);e=n.middle();t=n.middle(1);return e<t?(e+t)*.5:e},min:function(e){return v(1,this._,e)},multiply:function(e){return this._.length>0?T(this._,function(e,t){return e*t},e):0},outerJoin:function(e,t,r){e=N(e);if(!Array.isArray(e)){return this.clone()}if(!m(r)){r=y}var i=[],s,o,u,a=0,f,l=m(t);while(a<this._.length){s=this._[a++];u=0;f=0;while(f<e.length){o=e[f++];if(l&&t(s,o)||!l&&s===o){u=1;i.push(r(s,o))}}if(!u){i.push(r(s,n))}}return k(i)},pack:function(){var e=this._.length-1,t;while(e>=0){t=this._[e];if(g(t)||t===n){this._.splice(e,1)}e--}return this},partition:function(e,t,n){return k(w(this._,e,t,n))},pop:function(){return o.pop.apply(this._,arguments)},push:function(){return o.push.apply(this._,arguments)},pushRepeatedly:function(e,t){var n=0;while(n<t){this.push(e)}return this},range:function(e,t){return k(this._.slice(e,t))},raw:function(){return this._},removeAt:function(e){this._.splice(e,1)},removeRange:function(e,t){this._.splice(e,t)},reverse:function(){return k(o.reverse.apply(this._,arguments))},shift:function(){return o.shift.apply(this._,arguments)},shuffle:function(){this._.sort(S);return this},single:function(e){var t=N(this);if(m(e)){t=k(this).where(e).raw()}if(t.length!=1){throw new Error(p)}return t[0]},skip:function(e){return k(this._.slice(e))},sort:function(){o.sort.apply(this._,arguments);return this},sum:function(e){return this._.length>0?T(this._,function(e,t){return e+t},e):0},take:function(e){return k(this._.slice(0,e))},toString:function(){return o.toString.apply(this._,arguments)},union:function(e){var t=this.clone();o.push.apply(t.raw(),N(e));return t},unshift:function(){return o.unshift.apply(this._,arguments)},upperquartile:function(e){return E(this,3,e)},valueOf:function(){return o.valueOf.apply(this._,arguments)},where:function(e){var t=[],n,r=0;while(r<this._.length){n=this._[r++];if(e(n)){t.push(n)}}return k(t)}};if(!o.indexOf){o.indexOf=function(e,t){return d(this,s(e),1,t)}}if(!o.lastIndexOf){o.lastIndexOf=function(e,t){return d(this,s(e),-1,t)}}if(!o.map){o.map=function(e){var n=this.length,r=new Array(n>t.ARRAY_PREALLOCATION?0:n),i=0;if(!m(e)){return void 0}while(i<n){r[i]=e(this[i++])}return r}}if(!Array.isArray){Array.isArray=function(e){return Object.prototype.toString.call(e)=="[object Array]"}}return e}()}}();if(typeof exports==="object"&&exports){exports.Dinqyjs=Dinqyjs}
