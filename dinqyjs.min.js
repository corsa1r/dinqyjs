var Dinqyjs=function(){return{Collection:function(){function e(e){this._=e||[]}var t={ARRAY_PREALLOCATION:64e3},n=null,r=true,i=false,s=function(e,t,n){var r=h(n),i=0,s,o,u,a=[],f;e=v(e).distinct(n).raw();t=m(t);f=t.length;while(i<e.length){o=e[i++];s=0;while(s<f){u=t[s];if(r&&n(o,u)||!r&&o===u){break}s++}if(s===f){a.push(o)}}return v(a)},o=function(e,t){var n,r;for(r in e){n=e[r];if(!h(n)){t(n,r)}}},u="Array contains no matching elements",a="Array does not contain exactly one matching element",f=Array.prototype,l=function(e,t,n,r,i){var s,o=e.length;n=n||1;if(!h(t)){return o>0?n>0?0:o-1:-1}if(p(r)){r=n>0?0:o-1}if(p(i)||i>o){i=o}while(i>0){s=e[r];if(t(s)){return r}r+=n;i--}return-1},c=function(e,t,r){var i=t.length,s=i>0?t[0]:n,o,u=0,a=h(r),f;while(u<i){o=t[u++];f=a?r(o):o;if(e?f<=s:f>=s){s=o}}return s},h=function(e){return typeof e=="function"},p=function(e){return e===void 0},d=function(e,t){return{inner:e,outer:t}},v=function(t){return t._?t:new e(t)},m=function(e){return e._||e},g=function(e,t,r){var i=n,s=e.length-1,o,u=h(r),a;while(s>=0){o=e[s--];a=u?r(o):o;i=i===n?a:t(i,a)}return i},y=function(e,t,n,r){var i=0,s,o=[],u,a=h(n),f=h(r);while(i<e.length){s=e[i++];u=t(s);if(a){s=n(s)}(o[u]=u in o?o[u]:[]).push(s)}if(f){w(o,r)}return o},b=function(e){var t=h(e);return t?[function(t,n){return e(t)-e(n)}]:[]},w=function(e,t){var n,r;for(n in e){r=e[n];e[n]=t(r,n)}return e};e.associative=function(e){for(var t in e){if(!h(e[t])){return+e.length===0}}return i};e.configure=function(e,n){return t[e]=arguments.length<2?t[e]:n};e.prototype={all:function(e){var t=r,n=0;while(n<this._.length){t&=e(this._[n++])}return t?r:i},any:function(e){return l(this._,e)>=0},ascending:function(e){f.sort.apply(this._,b(e));return this},atRandom:function(){return this._[Math.floor(Math.random()*this._.length)]},average:function(e){var t=0,n=0,r=this._.length;while(n<r){t+=e?e(this._[n]):this._[n];n++}return r?t/r:0},clear:function(){this._.splice(0,this._.length)},clearWhere:function(e){var t=this._.length-1;while(t>=0){if(e(this._[t])){this._.splice(t,1)}t--}return this},clone:function(){return v(this._.concat())},concat:function(){return v(f.concat.apply(this._,arguments))},contains:function(e){return this._.indexOf(e)>-1},count:function(){return this._.length},descending:function(e){f.sort.apply(this._,b(e)).reverse();return this},difference:function(e,t){e=m(e);var n=this._;return s(n,e,t).union(s(e,n,t))},distinct:function(e){var t=h(e),n=[],r,i,s=0,o,u=this._.length;while(s<u){r=this._[s++];if(n.indexOf(r)==-1){o=0;while(o<u){i=this._[o];if(t&&e(r,i)||!t&&r===i){n.push(r);break}o++}}}return v(n)},doUntil:function(e,t){var n=0;while(n<this._.length){e(this._[n]);if(t(this._[++n])){return}}},doWhile:function(e,t){var n=0;while(n<this._.length){if(!t(this._[n],n)){return}e(this._[n],n++)}},each:function(t){var n=0,r=this._.length;if(r===+r&&!e.associative(this._)){while(n<r){t(this._[n],n);n++}}else{o(this._,t)}},element:function(e,t){return this._[e]=arguments.length>1?t:this._[e]},equalTo:function(e,t){e=m(e);var n=this._.length,s=n-1,o=h(t),u,a;if(n!=e.length){return i}while(s>=0){u=this._[s];a=e[s--];if(o?!t(u,a):u!==a){return i}}return r},findIndex:function(e,t,n){return h(e)?l(this._,e,1,t,n):-1},findLastIndex:function(e,t,n){return h(e)?l(this._,e,-1,t,n):-1},first:function(e){var t=l(this._,e);if(t>=0){return this._[t]}throw new Error(u)},flatten:function(){var t=0,n=new e,r;while(t<this._.length){r=this._[t++];e.prototype.push.apply(n,Array.isArray(r)?r:[r])}return n},groupBy:function(e,t,n){var r=y(this._,e,t,n),i;this._.splice(0,this._.length);for(i in r){this._[i]=r[i]}return this},indexOf:function(){return f.indexOf.apply(this._,arguments)},insert:function(e,t){this._.splice(e,0,t)},insertRange:function(e,t){var n=[e,0].concat(arguments.length<3?m(t):f.slice.call(arguments,1));f.splice.apply(this._,n)},intersect:function(e,t){var n=h(t),r=[],i,s,o=0,u,a=this.distinct(t).raw(),f=v(e).distinct(t).raw();while(o<a.length){i=a[o++];u=0;while(u<f.length){s=f[u++];if(n&&t(i,s)||!n&&i===s){r.push(i);break}}}return v(r)},innerJoin:function(e,t,n){e=m(e);if(!Array.isArray(e)){return this.clone()}if(!h(n)){n=d}var r=[],i,s,o=0,u;while(o<this._.length){i=this._[o++];u=0;while(u<e.length){s=e[u++];if(t(i,s)){r.push(n(i,s))}}}return v(r)},join:function(){return f.join.apply(this._,arguments)},keys:function(){var e=[],t;for(t in this._){if(!h(this._[t])){e.push(t)}}return e},last:function(e){var t=l(this._,e,-1);if(t>=0){return this._[t]}throw new Error(u)},lastIndexOf:function(){return f.lastIndexOf.apply(this._,arguments)},map:function(){var e=f.map.apply(this._,arguments);return e?v(e):void 0},max:function(e){return c(0,this._,e)},median:function(){var e=this._.length,t=parseInt(e/2-.5);return t>=e?void 0:this._[t]},min:function(e){return c(1,this._,e)},multiply:function(e){return this._.length>0?g(this._,function(e,t){return e*t},e):0},outerJoin:function(e,t,r){e=m(e);if(!Array.isArray(e)){return this.clone()}if(!h(r)){r=d}var i=[],s,o,u,a=0,f,l=h(t);while(a<this._.length){s=this._[a++];u=0;f=0;while(f<e.length){o=e[f++];if(l&&t(s,o)||!l&&s===o){u=1;i.push(r(s,o))}}if(!u){i.push(r(s,n))}}return v(i)},pack:function(){var e=this._.length-1,t;while(e>=0){t=this._[e];if(p(t)||t===n){this._.splice(e,1)}e--}return this},partition:function(e,t,n){return v(y(this._,e,t,n))},pop:function(){return f.pop.apply(this._,arguments)},push:function(){return f.push.apply(this._,arguments)},range:function(e,t){return v(this._.slice(e,t))},raw:function(){return this._},removeAt:function(e){this._.splice(e,1)},removeRange:function(e,t){this._.splice(e,t)},reverse:function(){return v(f.reverse.apply(this._,arguments))},shift:function(){return f.shift.apply(this._,arguments)},shuffle:function(){var e=this._.length-1,t,n;while(e>=0){n=Math.floor(Math.random()*this._.length);t=this._[e];this._[e--]=this._[n];this._[n]=t}return this},single:function(e){var t=m(this);if(h(e)){t=v(this).where(e).raw()}if(t.length!=1){throw new Error(a)}return t[0]},skip:function(e){return v(this._.slice(e))},sort:function(){f.sort.apply(this._,arguments);return this},sum:function(e){return this._.length>0?g(this._,function(e,t){return e+t},e):0},take:function(e){return v(this._.slice(0,e))},toString:function(){return f.toString.apply(this._,arguments)},union:function(e){var t=this.clone();f.push.apply(t.raw(),m(e));return t},unshift:function(){return f.unshift.apply(this._,arguments)},valueOf:function(){return f.valueOf.apply(this._,arguments)},where:function(e){var t=[],n,r=0;while(r<this._.length){n=this._[r++];if(e(n)){t.push(n)}}return v(t)}};if(!f.indexOf){f.indexOf=function(e,t){return l(this,E(e),1,t)}}if(!f.lastIndexOf){f.lastIndexOf=function(e,t){return l(this,E(e),-1,t)}}if(!f.map){f.map=function(e){var n=this.length,r=new Array(n>t.ARRAY_PREALLOCATION?0:n),i=0;if(!h(e)){return void 0}while(i<n){r[i]=e(this[i++])}return r}}if(!Array.isArray){Array.isArray=function(e){return Object.prototype.toString.call(e)=="[object Array]"}}var E=function(e){return function(t){return e===t}};return e}()}}();if(typeof exports==="object"&&exports){exports.Dinqyjs=Dinqyjs}