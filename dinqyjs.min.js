var Dinqyjs=function(){"use strict";return{Collection:function(){function t(t){this._=t||[]}var n={ARRAY_PREALLOCATION:64e3},r=null,i=!0,e=!1,u=Array,s=u.prototype,o=function(t){return function(n){return t===n}},h=function(t,n){var r=t,i=r/2;return parseInt(n>0?Math.ceil(i):i)},f=function(t,n){return t>n?1:n>t?-1:0},a=function(t,n,r){var i,e,u,s,o=v(r),h=0,f=[];for(t=k(t).distinct(r).raw(),n=q(n),s=n.length;h<t.length;){for(e=t[h++],i=0;s>i&&(u=n[i],!(o&&r(e,u)||!o&&e===u));)i++;i===s&&f.push(e)}return k(f)},c=function(t,n){var r,i;for(i in t)r=t[i],v(r)||n(r,i)},l="Array contains no matching elements",p="Array does not contain exactly one matching element",_=function(t,n,r,i,e){var u,s=t.length;if(r=r||1,!v(n))return s>0?r>0?0:s-1:-1;for(d(i)&&(i=r>0?0:s-1),(d(e)||e>s)&&(e=s);e>0;){if(u=t[i],n(u))return i;i+=r,e--}return-1},g=function(t,n,i){for(var e,u,s=n.length,o=s>0?n[0]:r,h=0,f=v(i);s>h;)e=n[h++],u=f?i(e):e,(t?o>=u:u>=o)&&(o=e);return o},v=function(t){return"function"==typeof t},d=function(t){return void 0===t},m=function(t,n){return{inner:t,outer:n}},y=function(t,n,r,i){for(var e=0;e<t.length;){if(r(t[e],e)==i)return;n(t[e],e++)}},w=function(t,n){return.25*(t*n+t)},x=function(t,n,r,i){for(var e,u,s=0,o=[],h=v(r),f=v(i);s<t.length;)e=t[s++],u=n(e),h&&(e=r(e)),(o[u]=u in o?o[u]:[]).push(e);return f&&j(o,i),o},A=function(t,n,r){var i,e,u,s,o,h,f,a,c=v(r),l=t.count();return 1>l?void 0:(i=t.raw().concat(),I(i,1,r),e=w(n,l),u=parseInt(e),s=parseInt(Math.ceil(e)),f=i[u-1],a=i[s-1],o=c?r(f):f,h=c?r(a):a,s>u?o:(o+h)/2)},O=function(){return Math.random()-.5},I=function(t,n){var r,i,e,u,o,h,a=n.length;return!n||1>a?void t.sort(f):(n=v(n)?n=[n]:s.slice.call(n),void t.sort(function(t,s){for(r=0,i=0;a>r&&0===i;)o=n[r++],v(o)&&(h=0,a>r&&"string"==typeof n[r]&&0===n[r].indexOf("des")&&(h=1),e=o(t),u=o(s),u>e?i=h?1:-1:e>u&&(i=h?-1:1));return i}))},R=function(t,n,i){for(var e,u,s=r,o=t.length-1,h=v(i);o>=0;)e=t[o--],u=h?i(e):e,s=s===r?u:n(s,u);return s},q=function(t){return t._||t},j=function(t,n){var r,i;for(r in t)i=t[r],t[r]=n(i,r);return t},k=function(n){return n._?n:new t(n)};return t.associative=function(t){for(var n in t)if(!v(t[n]))return 0===+t.length;return e},t.configure=function(t,r){return n[t]=arguments.length<2?n[t]:r},t.zip=function(){for(var t,n,r,i=0,e=arguments,u=arguments.length,s=[];u>i;){for(n=q(e[i++]),r=n.length;s.length<r;)s.push([]);for(t=0;r>t;)s[t].push(n[t++])}return k(s)},t.prototype={all:function(t){for(var n=i,r=0;r<this._.length;)n&=t(this._[r++]);return n?i:e},any:function(t){return _(this._,t)>=0},ascending:function(){return I(this._,arguments),this},orderBy:function(){I(this._,arguments)},atRandom:function(){return this._[Math.floor(Math.random()*this._.length)]},average:function(t){for(var n=0,r=0,i=this._.length;i>r;)n+=t?t(this._[r]):this._[r],r++;return i?n/i:0},clear:function(){this._.splice(0,this._.length)},clearWhere:function(t){for(var n=this._.length-1;n>=0;)t(this._[n])&&this._.splice(n,1),n--;return this},clone:function(){return k(this._.concat())},concat:function(){return k(s.concat.apply(this._,arguments))},contains:function(t){return this._.indexOf(t)>-1},count:function(){return this._.length},descending:function(){return I(this._,arguments),this.reverse()},difference:function(t,n){t=q(t);var r=this._;return a(r,t,n).union(a(t,r,n))},distinct:function(t){for(var n,r,i,e=v(t),u=[],s=0,o=this._.length;o>s;)if(n=this._[s++],-1==u.indexOf(n))for(i=0;o>i;){if(r=this._[i],e&&t(n,r)||!e&&n===r){u.push(n);break}i++}return k(u)},doUntil:function(t,n){y(this._,t,n,1)},doWhile:function(t,n){y(this._,t,n,0)},each:function(n){var r=0,i=this._.length;if(i!==+i||t.associative(this._))c(this._,n);else for(;i>r;)n(this._[r],r),r++},element:function(t,n){return this._[t]=arguments.length>1?n:this._[t]},equalTo:function(t,n){t=q(t);var r,u,s=this._.length,o=s-1,h=v(n);if(s!=t.length)return e;for(;o>=0;)if(r=this._[o],u=t[o--],h?!n(r,u):r!==u)return e;return i},findIndex:function(t,n,r){return v(t)?_(this._,t,1,n,r):-1},findLastIndex:function(t,n,r){return v(t)?_(this._,t,-1,n,r):-1},first:function(t){var n=_(this._,t);if(n>=0)return this._[n];throw new Error(l)},flatten:function(){for(var n,r=0,i=new t;r<this._.length;)n=this._[r++],t.prototype.push.apply(i,u.isArray(n)?n:[n]);return i},groupBy:function(t,n,r){var i,e=x(this._,t,n,r);this._.splice(0,this._.length);for(i in e)this._[i]=e[i];return this},indexOf:function(){return s.indexOf.apply(this._,arguments)},insert:function(t,n){this._.splice(t,0,n)},insertRange:function(t,n){var r=[t,0].concat(arguments.length<3?q(n):s.slice.call(arguments,1));s.splice.apply(this._,r)},intersect:function(t,n){for(var r,i,e,u=v(n),s=[],o=0,h=this.distinct(n).raw(),f=k(t).distinct(n).raw();o<h.length;)for(r=h[o++],e=0;e<f.length;)if(i=f[e++],u&&n(r,i)||!u&&r===i){s.push(r);break}return k(s)},innerJoin:function(t,n,r){if(t=q(t),!u.isArray(t))return this.clone();v(r)||(r=m);for(var i,e,s,o=[],h=0;h<this._.length;)for(i=this._[h++],s=0;s<t.length;)e=t[s++],n(i,e)&&o.push(r(i,e));return k(o)},interquartileRange:function(t){return this.upperquartile(t)-this.lowerquartile(t)},join:function(){return s.join.apply(this._,arguments)},keys:function(){var t,n=[];for(t in this._)v(this._[t])||n.push(t);return n},last:function(t){var n=_(this._,t,-1);if(n>=0)return this._[n];throw new Error(l)},lastIndexOf:function(){return s.lastIndexOf.apply(this._,arguments)},lowerquartile:function(t){return A(this,1,t)},map:function(){var t=s.map.apply(this._,arguments);return t?k(t):void 0},max:function(t){return g(0,this._,t)},middle:function(t){return this._[h(this._.length-1,t)]},median:function(){var t,n,r;return r=this.clone(),I(r.raw(),arguments),t=r.middle(),n=r.middle(1),n>t?.5*(t+n):t},min:function(t){return g(1,this._,t)},multiply:function(t){return this._.length>0?R(this._,function(t,n){return t*n},t):0},outerJoin:function(t,n,i){if(t=q(t),!u.isArray(t))return this.clone();v(i)||(i=m);for(var e,s,o,h,f=[],a=0,c=v(n);a<this._.length;){for(e=this._[a++],o=0,h=0;h<t.length;)s=t[h++],(c&&n(e,s)||!c&&e===s)&&(o=1,f.push(i(e,s)));o||f.push(i(e,r))}return k(f)},pack:function(){for(var t,n=this._.length-1;n>=0;)t=this._[n],(d(t)||t===r)&&this._.splice(n,1),n--;return this},partition:function(t,n,r){return k(x(this._,t,n,r))},pop:function(){return s.pop.apply(this._,arguments)},push:function(){return s.push.apply(this._,arguments)},pushRepeatedly:function(t,n){for(var r=0;n>r;)this.push(t);return this},range:function(t,n){return k(this._.slice(t,n))},raw:function(){return this._},removeAt:function(t){this._.splice(t,1)},removeRange:function(t,n){this._.splice(t,n)},reverse:function(){return k(s.reverse.apply(this._,arguments))},shift:function(){return s.shift.apply(this._,arguments)},shuffle:function(){return this._.sort(O),this},single:function(t){var n=q(this);if(v(t)&&(n=k(this).where(t).raw()),1!=n.length)throw new Error(p);return n[0]},skip:function(t){return k(this._.slice(t))},sort:function(){return s.sort.apply(this._,arguments),this},sum:function(t){return this._.length>0?R(this._,function(t,n){return t+n},t):0},take:function(t){return k(this._.slice(0,t))},toString:function(){return s.toString.apply(this._,arguments)},union:function(t){var n=this.clone();return s.push.apply(n.raw(),q(t)),n},unshift:function(){return s.unshift.apply(this._,arguments)},upperquartile:function(t){return A(this,3,t)},valueOf:function(){return s.valueOf.apply(this._,arguments)},where:function(t){for(var n,r=[],i=0;i<this._.length;)n=this._[i++],t(n)&&r.push(n);return k(r)}},s.indexOf||(s.indexOf=function(t,n){return _(this,o(t),1,n)}),s.lastIndexOf||(s.lastIndexOf=function(t,n){return _(this,o(t),-1,n)}),s.map||(s.map=function(t){var r=this.length,i=new u(r>n.ARRAY_PREALLOCATION?0:r),e=0;if(!v(t))return void 0;for(;r>e;)i[e]=t(this[e++]);return i}),u.isArray||(u.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)}),t}()}}();"object"==typeof exports&&exports&&(exports.Dinqyjs=Dinqyjs);